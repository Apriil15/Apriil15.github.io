"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9038],{3905:function(n,t,e){e.d(t,{Zo:function(){return f},kt:function(){return s}});var r=e(7294);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?l(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function u(n,t){if(null==n)return{};var e,r,a=function(n,t){if(null==n)return{};var e,r,a={},l=Object.keys(n);for(r=0;r<l.length;r++)e=l[r],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)e=l[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var o=r.createContext({}),c=function(n){var t=r.useContext(o),e=t;return n&&(e="function"==typeof n?n(t):i(i({},t),n)),e},f=function(n){var t=c(n.components);return r.createElement(o.Provider,{value:t},n.children)},p={inlineCode:"code",wrapper:function(n){var t=n.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(n,t){var e=n.components,a=n.mdxType,l=n.originalType,o=n.parentName,f=u(n,["components","mdxType","originalType","parentName"]),m=c(e),s=a,d=m["".concat(o,".").concat(s)]||m[s]||p[s]||l;return e?r.createElement(d,i(i({ref:t},f),{},{components:e})):r.createElement(d,i({ref:t},f))}));function s(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var l=e.length,i=new Array(l);i[0]=m;var u={};for(var o in t)hasOwnProperty.call(t,o)&&(u[o]=t[o]);u.originalType=n,u.mdxType="string"==typeof n?n:a,i[1]=u;for(var c=2;c<l;c++)i[c]=e[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,e)}m.displayName="MDXCreateElement"},9544:function(n,t,e){e.r(t),e.d(t,{frontMatter:function(){return u},contentTitle:function(){return o},metadata:function(){return c},toc:function(){return f},default:function(){return m}});var r=e(7462),a=e(3366),l=(e(7294),e(3905)),i=["components"],u={},o="First-Class function",c={unversionedId:"golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe",id:"golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe",title:"First-Class function",description:"- function \u53ef\u4ee5\u6307\u6d3e\u7d66\u8b8a\u6578\uff0c\u7136\u5f8c\u76f4\u63a5\u5f9e\u8a72\u8b8a\u6578\u8abf\u7528 function",source:"@site/docs/golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe.md",sourceDirName:"golang",slug:"/golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe",permalink:"/docs/golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe",editUrl:"https://github.com/Apriil15/apriil15.github.io/tree/master/docs/golang/First-Class function 5082af28a52d49d080d95d2a61c90ebe.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Error Handling",permalink:"/docs/golang/Error Handling 3837b0595d954dba9fc7b0672ab186bd"},next:{title:"Goroutine",permalink:"/docs/golang/Goroutine 4cd92501f453408bab638e1586017332"}},f=[{value:"Example",id:"example",children:[],level:2},{value:"\u5229\u7528 first-class function \u4f86\u91cd\u69cb",id:"\u5229\u7528-first-class-function-\u4f86\u91cd\u69cb",children:[],level:2}],p={toc:f};function m(n){var t=n.components,e=(0,a.Z)(n,i);return(0,l.kt)("wrapper",(0,r.Z)({},p,e,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"first-class-function"},"First-Class function"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"function \u53ef\u4ee5\u6307\u6d3e\u7d66\u8b8a\u6578\uff0c\u7136\u5f8c\u76f4\u63a5\u5f9e\u8a72\u8b8a\u6578\u8abf\u7528 function"),(0,l.kt)("li",{parentName:"ul"},"function \u4e5f\u53ef\u4ee5\u7576\u4f5c\u53c3\u6578\uff0c\u50b3\u5165\u53e6\u4e00\u500b function")),(0,l.kt)("h2",{id:"example"},"Example"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6c92\u53c3\u6578\u7684\u5beb\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "fmt"\n\nfunc main() {\n    // \u628a function \u5b58\u5728\u8b8a\u6578\u88e1\uff0c\u5169\u7a2e\u5ba3\u544a\u65b9\u6cd5\n    var t1 func() = test1\n    t2 := test2\n\n    f(t1)\n    f(t2)\n}\n\n// \u628a function (\u6c92\u53c3\u6578) \u7576\u4f5c\u8b8a\u6578\u50b3\u5165\nfunc f(a func()) {\n    a()\n}\nfunc test1() {\n    fmt.Println("test1")\n}\nfunc test2() {\n    fmt.Println("test2")\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6709\u53c3\u6578\u7684\u5beb\u6cd5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "fmt"\n\nfunc main() {\n    // \u628a function \u5b58\u5728\u8b8a\u6578\u88e1\uff0c\u5169\u7a2e\u5ba3\u544a\u65b9\u6cd5\n    var t1 func(int, int) int = add\n    t2 := subtract\n\n    fmt.Println(calculator(t1, 1, 2))\n    fmt.Println(calculator(add, 1, 2)) // \u7576\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u9019\u6a23\u5beb\uff0c\u540c\u4e0a\n\n    fmt.Println(calculator(t2, 8, 7))\n}\n\n// \u628a function (\u6709\u53c3\u6578) \u7576\u4f5c\u8b8a\u6578\u50b3\u5165\nfunc calculator(f func(int, int) int, x int, y int) int {\n    return f(x, y)\n}\nfunc add(x int, y int) int {\n    return x + y\n}\nfunc subtract(x int, y int) int {\n    return x - y\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "reflect"\n)\n\n// \u5e95\u5c64\u662f func(int, int) int\uff0c\u4f46\u5be6\u969b\u4e0a\u578b\u5225\u662f Test\uff0c\u5169\u8005\u70ba\u4e0d\u540c\u578b\u5225\ntype Test func(int, int) int\n\n// \u578b\u5225\u5225\u540d\u5ba3\u544a\uff0c\u578b\u5225\u70ba func(int, int) int\n// \u5982\u679c\u53ea\u662f\u8981\u7e2e\u77ed\u540d\u7a31\u53ef\u4ee5\u9019\u6a23\u7528\ntype Test2 = func(int, int) int\n\nfunc main() {\n    maximum := max\n    fmt.Println(maximum(3, 5))\n    fmt.Println(reflect.TypeOf(max))     // func(int, int) int\n    fmt.Println(reflect.TypeOf(maximum)) // func(int, int) int\n    fmt.Println(&maximum)                // \u65e2\u7136\u662f\u8b8a\u6578\uff0c\u7576\u7136\u53ef\u4ee5\u53d6 pointer\n\n    var t Test\n    var t2 Test2\n    fmt.Println(reflect.TypeOf(t))  // main.Test\n    fmt.Println(reflect.TypeOf(t2)) // func(int, int) int\n}\n\nfunc max(a int, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n')),(0,l.kt)("h2",{id:"\u5229\u7528-first-class-function-\u4f86\u91cd\u69cb"},"\u5229\u7528 first-class function \u4f86\u91cd\u69cb"),(0,l.kt)("p",null,"\u539f\u672c\u53ea\u662f\u5f88\u55ae\u7d14\u8981 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u6ffe\u51fa > 5 \u7684\u6578\u5b57")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "fmt"\n\nfunc main() {\n    numbers := []int{1, 2, 4, 5, 6, 7, 8}\n    result := filter(numbers)\n    fmt.Println(result)\n}\n\n// \u6ffe\u51fa > 5 \u7684\u6578\u5b57\nfunc filter(numbers []int) []int {\n    var result []int\n    for _, number := range numbers {\n        if number > 5 {\n            result = append(result, number)\n        }\n    }\n    return result\n}\n')),(0,l.kt)("p",null,"\u6709\u4e00\u5929\u53ef\u80fd\u53c8\u8ffd\u52a0\u4e00\u500b\u9700\u6c42\uff0c\u8981 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u6ffe\u51fa < 5 \u7684\u6578\u5b57")),(0,l.kt)("p",null,"\u6211\u5011\u53ef\u80fd\u76f4\u63a5\u8907\u88fd\u8cbc\u4e0a\uff0c\u6539\u500b function \u540d\u7a31\uff0c\u88e1\u9762\u5224\u65b7\u908f\u8f2f\u6539\u4e00\u4e0b\uff0c\u4ea4\u5dee\u5b8c\u5de5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"func filterSmallerThan5(numbers []int) []int {\n    var result []int\n    for _, number := range numbers {\n        if number < 5 {\n            result = append(result, number)\n        }\n    }\n    return result\n}\n")),(0,l.kt)("p",null,"But\uff0c\u9019\u6a23\u6703\u6709\u500b\u554f\u984c\uff0c\u91cd\u8907\u7684 code \u592a\u591a\u60f9\uff0c\u9700\u8981\u597d\u597d\u91cd\u69cb"),(0,l.kt)("p",null,"\u6211\u5011\u6700\u7d42\u7684\u76ee\u6a19\u5c31\u662f\uff1a"),(0,l.kt)("p",null,"\u8b93 ",(0,l.kt)("inlineCode",{parentName:"p"},"number > 5")," \u8b8a\u6210\u4e0d\u7528\u5beb\u6b7b\u5728\u88e1\u9762\uff0c\u80fd\u5f9e\u5916\u90e8\u53bb\u63a7\u5236"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"if number > 5 {\n    result = append(result, number)\n}\n")),(0,l.kt)("p",null,"\u56e0\u6b64\u6709\u4e86\u9019\u500b\u7248\u672c\uff1a"),(0,l.kt)("p",null,"\u8b93 ",(0,l.kt)("inlineCode",{parentName:"p"},"filter")," \u65b9\u6cd5 \u53ef\u4ee5\u50b3\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},"filterFunc func(int) bool")),(0,l.kt)("p",null,"\u53ef\u4ee5\u6709\u5f48\u6027\u7684\u53bb\u5b9a\u7fa9\u904e\u6ffe\u7684\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "fmt"\n\nfunc main() {\n    numbers := []int{1, 2, 4, 5, 6, 7, 8}\n    result := filter(numbers, BiggerThan5)\n    fmt.Println(result)\n}\n\nfunc filter(numbers []int, filterFunc func(int) bool) []int {\n    var result []int\n    for _, number := range numbers {\n        if filterFunc(number) {\n            result = append(result, number)\n        }\n    }\n    return result\n}\n\nfunc BiggerThan5(value int) bool {\n    return value > 5\n}\n\nfunc SmallerThan5(value int) bool {\n    return value < 5\n}\n')),(0,l.kt)("p",null,"\u9019\u6a23\u54ea\u5929 PM \u8aaa\u8981 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u6ffe\u51fa 2 ~ 4 \u4e4b\u9593")," \u7684\u5c31\u53ef\u4ee5\u52a0\u4e0a\u9019\u500b func"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"func PMSayBetween2to4(value int) bool {\n    return value >= 2 && value <= 4\n}\n")),(0,l.kt)("p",null,"\u6700\u5f8c\uff0c\u53c8\u89ba\u5f97\u53c3\u6578 ",(0,l.kt)("inlineCode",{parentName:"p"},"filterFunc func(int) bool")," \u5f8c\u9762\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"func(int) bool")," \u6709\u9ede\u592a\u5197\u9577"),(0,l.kt)("p",null,"\u56e0\u6b64\u53ef\u4ee5\u518d\u505a\u9ede\u8abf\u6574\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"type FilterFunc = func(int) bool")),(0,l.kt)("p",null,"\u4ee3\u8868 ",(0,l.kt)("inlineCode",{parentName:"p"},"FilterFunc")," \u9019\u500b\u578b\u5225\u5c31\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"func(int) bool")),(0,l.kt)("p",null,"\u6700\u7d42\u7248\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "fmt"\n\nfunc main() {\n    numbers := []int{1, 2, 4, 5, 6, 7, 8}\n    result := filter(numbers, BiggerThan5)\n    result2 := filter(numbers, PMSayBetween2to4)\n    fmt.Println(result)\n    fmt.Println(result2)\n}\n\nfunc filter(numbers []int, filterFunc FilterFunc) []int {\n    var result []int\n    for _, number := range numbers {\n        if filterFunc(number) {\n            result = append(result, number)\n        }\n    }\n    return result\n}\n\n// \u578b\u5225\u5225\u540d\u5ba3\u544a\ntype FilterFunc = func(int) bool\n\nfunc BiggerThan5(value int) bool {\n    return value > 5\n}\n\nfunc SmallerThan5(value int) bool {\n    return value < 5\n}\n\nfunc PMSayBetween2to4(value int) bool {\n    return value >= 2 && value <= 4\n}\n')))}m.isMDXComponent=!0}}]);