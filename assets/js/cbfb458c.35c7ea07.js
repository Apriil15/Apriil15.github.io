"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2906],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),p=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=p(e.components);return r.createElement(c.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(t),f=a,g=u["".concat(c,".").concat(f)]||u[f]||m[f]||o;return t?r.createElement(g,i(i({ref:n},s),{},{components:t})):r.createElement(g,i({ref:n},s))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=f;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},8771:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const o={},i="\u5982\u4f55\u5beb Benchmark",l={unversionedId:"golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789",id:"golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789",title:"\u5982\u4f55\u5beb Benchmark",description:"\u5076\u7136\u4e4b\u4e0b\uff0c\u4eca\u5929\u88ab\u8feb\u5b78\u7fd2 Golang \u7684 benchmark \u600e\u9ebc\u5bebXD\uff0c\u99ac\u4e0a\u8a18\u9304\u4e0b\u4f86",source:"@site/docs/golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789.md",sourceDirName:"golang/Basis",slug:"/golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789",permalink:"/docs/golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789",draft:!1,editUrl:"https://github.com/Apriil15/apriil15.github.io/tree/master/docs/golang/Basis/\u5982\u4f55\u5beb Benchmark f59b6673a85f4f27913bc2becac61789.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"interface",permalink:"/docs/golang/Basis/interface 0f319be3a7024dbd82a2e439c9e278de"},next:{title:"\u683c\u5f0f\u5316",permalink:"/docs/golang/Basis/\u683c\u5f0f\u5316 6c324701881a41f5857e1e243dc416cb"}},c={},p=[{value:"Rule",id:"rule",level:2},{value:"Case",id:"case",level:2},{value:"\u7d50\u679c",id:"\u7d50\u679c",level:2},{value:"\u5f8c\u8a18",id:"\u5f8c\u8a18",level:2},{value:"Reference",id:"reference",level:2}],s={toc:p};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u5982\u4f55\u5beb-benchmark"},"\u5982\u4f55\u5beb Benchmark"),(0,a.kt)("p",null,"\u5076\u7136\u4e4b\u4e0b\uff0c\u4eca\u5929\u88ab\u8feb\u5b78\u7fd2 Golang \u7684 benchmark \u600e\u9ebc\u5bebXD\uff0c\u99ac\u4e0a\u8a18\u9304\u4e0b\u4f86"),(0,a.kt)("h2",{id:"rule"},"Rule"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5efa\u7acb ",(0,a.kt)("inlineCode",{parentName:"li"},"xxx_test.go")," \u6a94\u6848 (\u5148\u7528 VS Code \u5efa\u7acb\u6e2c\u8a66\u6a94\u6848\uff0c\u518d\u628a\u4e0d\u9700\u8981\u7684\u522a\u6389)"),(0,a.kt)("li",{parentName:"ul"},"\u65b9\u6cd5\u958b\u982d\u8981\u6709 ",(0,a.kt)("inlineCode",{parentName:"li"},"Benchmark")),(0,a.kt)("li",{parentName:"ul"},"\u50b3\u5165\u53c3\u6578\u6539\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"b *testing.B")),(0,a.kt)("li",{parentName:"ul"},"\u6848\u4f8b\u5beb\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"for i := 0; i < b.N; i++ {\n        // \u8981\u6e2c\u8a66\u7684\u65b9\u6cd5\n}\n")),(0,a.kt)("h2",{id:"case"},"Case"),(0,a.kt)("p",null,"\u91dd\u5c0d main.go \u88e1\u9762\u7684\u4e09\u500b\u65b9\u6cd5\u505a benchmark"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "strconv"\n)\n\nfunc main() {\n\n}\n\nfunc IntToString_1(num int) string {\n    return fmt.Sprintf("%d", num)\n}\n\nfunc IntToString_2(num int64) string {\n    return strconv.FormatInt(num, 10)\n}\nfunc IntToString_3(num int) string {\n    return strconv.Itoa(num)\n}\n')),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"main_test.go")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "testing"\n)\n\nfunc BenchmarkIntToString_1(b *testing.B) {\n    for i := 0; i < b.N; i++ {\n        IntToString_1(100)\n    }\n}\n\nfunc BenchmarkIntToString_2(b *testing.B) {\n    for i := 0; i < b.N; i++ {\n        IntToString_2(100)\n    }\n}\n\nfunc BenchmarkIntToString_3(b *testing.B) {\n    for i := 0; i < b.N; i++ {\n        IntToString_3(100)\n    }\n}\n')),(0,a.kt)("h2",{id:"\u7d50\u679c"},"\u7d50\u679c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"goos: windows\ngoarch: amd64\npkg: practice_go\ncpu: AMD Ryzen 5 3600 6-Core Processor              \nBenchmarkIntToString_1-12       13907173        86.28 ns/op        3 B/op          1 allocs/op\nBenchmarkIntToString_2-12       47021758      25.45 ns/op          3 B/op          1 allocs/op\nBenchmarkIntToString_3-12       45960633        25.77 ns/op        3 B/op          1 allocs/op\nPASS\nok      practice_go 3.787s\n")),(0,a.kt)("p",null,"\u4ee3\u8868\u610f\u601d\uff1a"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"-12"),": CPU core"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"13907173"),": \u6bcf\u79d2\u57f7\u884c\u6b21\u6578"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"86.28 ns/op"),": \u6bcf\u6b21\u591a\u5c11 ns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"1 allocs/op"),": \u57f7\u884c\u4e00\u6b21\u8981\u5206\u914d\u5e7e\u500b\u8a18\u61b6\u9ad4\u7a7a\u9593"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"3 B/op:")," \u4e00\u500b\u8a18\u61b6\u9ad4\u7a7a\u9593\u591a\u5c11 Bytes"),(0,a.kt)("h2",{id:"\u5f8c\u8a18"},"\u5f8c\u8a18"),(0,a.kt)("p",null,"\u4e0d\u77e5\u9053\u70ba\u4ec0\u9ebc command \u4e0d\u80fd\u7528\uff0c\u76ee\u524d\u662f\u7528 VS Code extension \u4e0a\u9762\u986f\u793a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"run package benchmarks"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"run file benchmarks")," \u4f86\u57f7\u884c"),(0,a.kt)("h2",{id:"reference"},"Reference"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://blog.wu-boy.com/2018/06/how-to-write-benchmark-in-go/"},"\u5982\u4f55\u5728 Go \u8a9e\u8a00\u5167\u5beb\u6548\u80fd\u6e2c\u8a66")))}u.isMDXComponent=!0}}]);